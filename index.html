<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèÉ</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Run Tracker</title>
    <!-- Hide body until CSS loads to prevent FOUC -->
    <style>
      body { opacity: 0; }
      body.ready { opacity: 1; }
    </style>
  </head>
  <body>
    <!-- Map container -->
    <div id="map"></div>

    <!-- Re-center button -->
    <button id="recenter-btn" class="recenter-btn" title="Re-center on my location" disabled>
      <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
        <path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
      </svg>
    </button>

    <!-- Stats and controls overlay -->
    <div id="controls" class="controls">
      <div class="stats">
        <div class="stat">
          <span class="stat-value" id="duration">00:00:00</span>
          <span class="stat-label">Duration</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="distance">0.00 km</span>
          <span class="stat-label">Distance</span>
        </div>
      </div>
      
      <button id="play-pause-btn" class="play-pause-btn" data-state="stopped" disabled>
        <svg id="play-icon" viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
          <path d="M8 5v14l11-7z"/>
        </svg>
        <svg id="pause-icon" viewBox="0 0 24 24" width="32" height="32" fill="currentColor" style="display: none;">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
        </svg>
        <svg id="stop-icon" viewBox="0 0 24 24" width="32" height="32" fill="currentColor" style="display: none;">
          <path d="M6 6h12v12H6z"/>
        </svg>
      </button>

      <button id="finish-btn" class="finish-btn" style="display: none;" disabled>
        Finish Run
      </button>
    </div>

    <!-- History panel toggle -->
    <button id="history-toggle" class="history-toggle" disabled>
      <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
        <path d="M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
      </svg>
      History
    </button>

    <!-- History panel -->
    <div id="history-panel" class="history-panel" style="transform: translateY(100%)">
      <div class="history-header">
        <h2>Run History</h2>
        <button id="history-close" class="history-close" disabled>&times;</button>
      </div>
      <div id="history-list" class="history-list">
        <p class="empty-state">No runs yet. Start your first run!</p>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
